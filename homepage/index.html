<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kinetic Homepage</title>
    <style>
      html { font-size: 10px}
      body { font-size: 1.4rem; } /* =14px */
      /* the below styles are present on osweb and must be overridden */
      body {
        font-weight: normal;
        letter-spacing: normal;
        line-height: 2.5rem;
        background-color: #f1f1f1;
        color: #424242;
        margin: 0;
        min-height: 100vh;
      }
      .hero {
        align-items: center;
        padding: 6rem 1.5rem;
      }
    </style>
  </head>
  <body>
    <script type="application/javascript">
      window.KINETIC = (window.KINETIC || {});
      if (!window.KINETIC.preScriptRan) {
          var URLS = {
              SAMPLE_STUDY: 'https://riceuniversity.co1.qualtrics.com/jfe/form/SV_8vUOQo2nx2s79NI'
          };
          if (window.location.host === 'openstax.org') {
              Object.assign(URLS, {
                  ACCOUNTS: 'https://openstax.org/accounts',
                  WHOAMI: 'https://openstax.org/accounts/api/user',
                  KINETIC: 'https://kinetic.openstax.org/',
              });
          } else {
              Object.assign(URLS, {
                  ACCOUNTS: 'https://staging.openstax.org/accounts',
                  WHOAMI: 'https://staging.openstax.org/accounts/api/user',
                  KINETIC: 'https://staging.kinetic.openstax.org/',
              });
          }
          var favIcon = document.querySelector('[rel="shortcut icon"]');
          var previousFavIcon;
          if (favIcon) {
              previousFavIcon = { href: favIcon.href, el: favIcon };
              favIcon.href =  'https://assets.openstax.org/oscms-prodcms/media/images/kinetic-favicon-32x32.original.webp';
          }
          document.title = "OpenStax Kinetic";
          window.KINETIC.preScriptRan = true;
      }
    </script>
    <style>
      /* IMPORTANT:
         These override OpenStax CMS styles to enable full-width and borderless page
     */
      .general.page {
        padding-bottom: 0;
      }
      .general.page > section:first-child {
          margin-bottom: 0;
      }
      .general.page > section {
        padding: 0;
        max-width: 100vw;
      }
      @media (min-width: 75.0625em) {
          .general.page > section:not(.block-heading) {
              max-width: 100vw;
          }
      }

      /* kinetic homepage specific styles */
      #kinetic-homepage {
          background-color: #fff;
          font-family: 'Helvetica Neue';
      }

      #kinetic-homepage h1,
      #kinetic-homepage h2,
      #kinetic-homepage h3,
      #kinetic-homepage h4 {
          font-style: normal;
          font-weight: 700;
          color: #151B2C;
      }
      #kinetic-homepage h2 {
          font-size: 36px;
          line-height: 40px;
          letter-spacing: -0.04em;
          text-align: center;
      }
      #kinetic-homepage h3 {
          font-size: 36px;
          line-height: 40px;
          text-align: center;
      }
      #kinetic-homepage h4 {
          font-size: 24px;
          line-height: 30px;
          text-align: center;
      }
      #kinetic-homepage h5 {
          font-size: 20px;
          line-height: 30px;
          text-align: center;
      }
      #kinetic-homepage p {
          font-style: normal;
          font-weight: 400;
          font-size: 16px;
          line-height: 25px;
          color: #424242;
      }

      #kinetic-homepage .x-small {
        font-size: 9px;
        line-height: 12px;
      }
      #kinetic-homepage .container {
          padding-left: 20px;
          padding-right: 20px;
          max-width: 1210px;
          margin: auto;
      }
      #kinetic-homepage .centering {
          display: flex;
          flex-direction: column;
          align-items: center;
      }
      #kinetic-homepage .columns {
          display: flex;
          gap: 40px;
      }
      #kinetic-homepage .columns > * {
          flex: 1;
          text-align: center;
      }

      #kinetic-homepage .hero-block,
      #kinetic-homepage .participate {
          background: #151B2C;
          color: #fff;
          position: relative;
          z-index: 0;
      }

      #kinetic-homepage .hero-block .container {
          display: flex;
          align-items: center;
          gap: 40px;
      }
      #kinetic-homepage .hero-block .lines {
          position: absolute;
          opacity: 0.4;
          top: 380px;
          z-index: -1;
          width: 100%;
      }
      #kinetic-homepage .txt-block h2,
      #kinetic-homepage .txt-block h3 {
          text-align: left;
          color: #fff;
      }
      #kinetic-homepage .txt-block p {
          color: #dbdbdb;
      }
      #kinetic-homepage p.light {
        color: #848484;
      }
      #kinetic-homepage .actions-block {
        margin-top: 20px;
      }
      #kinetic-homepage .actions-block .buttons {
        display: flex;
        align-items: center;
        min-height: 40px;
      }
      #kinetic-homepage .link {
        transition: all 0.3s;
        text-decoration: none;
      }
      #kinetic-homepage .text-decoration-none {
        text-decoration: none;
      }
      #kinetic-homepage .btn.primary {
        background-color: #6821ea;
        color: #fff;
        border-radius: 4px;
        border: 1px solid #6821ea;
        padding: 10px;
      }
      #kinetic-homepage .btn.primary:hover {
        color: #a7a7a7;
      }

      #kinetic-homepage .link {
        border-bottom: 1px solid #fff;
      }
      #kinetic-homepage .link + .link {
          margin-left: 20px;
      }

      #kinetic-homepage .actions-block a {
        color: white;
        font-size: 18px;
        display: flex;
        align-items: center;
      }
      #kinetic-homepage .hero-block {
          overflow: hidden;
      }
      #kinetic-homepage .hero-block .cards {
          max-width: 450px;
          display: flex;
          gap: 20px;
      }
      #kinetic-homepage .hero-block .cards img {
          height: fit-content;
          min-height: 300px;
          max-width: 200px;
      }
      #kinetic-homepage .hero-block .cards .col-1 {
          display: flex;
          flex-direction: column;
          justify-content: center;
      }
      #kinetic-homepage .hero-block .cards .col-2 {
          display: flex;
          flex-direction: column;
          gap: 20px;
      }

      #kinetic-homepage .how h3 {
          margin: 60px auto;
      }

      #kinetic-homepage .how .panels {
          display: flex;
      }
      #kinetic-homepage .how .step-pics {
          flex: 1;
          display: flex;
          align-items: center;
          justify-content: center;
      }
      #kinetic-homepage .how img {
          height: 500px;
          display: none;
          max-width: 100%;
      }
      #kinetic-homepage .how img.active {
          display: block;
      }


      #kinetic-homepage .step-cards {
          display: flex;
          flex-direction: column;
          gap: 40px;
      }
      #kinetic-homepage .step {
          cursor: pointer;
          max-width: 350px;
          padding: 20px;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.18);
          border-radius: 20px;
          transition: all 0.5s ease;
          color: black;
          background: #fff;
      }
      #kinetic-homepage .step.active {
          background: #6922EA;
          color: #fff;
      }
      #kinetic-homepage .step.active p { color: #fff; }
      #kinetic-homepage .step h5,
      #kinetic-homepage .step p { margin: 0; }
      #kinetic-homepage .step h5 {
          text-align: left;
          margin-bottom: 10px;
      }
      #kinetic-homepage .step.two {
          margin-left: 80px;
      }


      #kinetic-homepage .sample { margin-top: 40px; }
      #kinetic-homepage .sample h4 { position: relative; }
      #kinetic-homepage .sample h4 svg {
          position: absolute;
          top: -100px;
          left: -120px;
      }

      #kinetic-homepage .sample h5 {
          font-weight: 400;
          position: relative;
      }
      #kinetic-homepage .sample img {
          display: block;
          margin: auto;
          max-width: 370px;
      }
      #kinetic-homepage .sample .container {
          display: flex;
          flex-direction: column;
          align-items: center;
          margin-bottom: 40px;
      }


      #kinetic-homepage .about {
          background: #F7F8FA;
          padding: 40px 0;
      }
      #kinetic-homepage .about .learn-more {
          color: #6922EA;
          font-size: 16px;
      }
      #kinetic-homepage .about .columns h5 {
          display: flex;
          align-items: center;
          gap: 10px;
          text-align: left;
          height: 60px;
          margin-bottom: 0;
      }

      #kinetic-homepage .supporters {
          padding: 40px 0;
      }

      #kinetic-homepage .supporters h4 {
          text-align: left;
      }
      #kinetic-homepage .supporters .other-supporters {
          font-weight: bold;
          font-size: 18px;
          color: #6922EA;
      }
      #kinetic-homepage .supporters .columns {
          align-items: center;
      }
      #kinetic-homepage .supporters .centered {
          max-width: 600px;
          margin: auto;
          display: flex;
          align-items: center;
          flex-direction: column;
      }
      #kinetic-homepage .supporters .imgs {
          display: flex;
          align-items: center;
      }

      #kinetic-homepage .participate {
          overflow: hidden;
          padding: 60px 0;
          position: relative;
      }
      #kinetic-homepage .participate .container {
          display: flex;
      }
      #kinetic-homepage .participate .txt-block {
          margin-left: 30%;
      }
      #kinetic-homepage .login-signup {
          /*margin-top: 4rem;*/
      }
      #kinetic-homepage .start-using {
          /*margin-top: 4rem;*/
      }
      #kinetic-homepage .participate .lines {
          position: absolute;
          z-index: -1;
          transform: rotate(44deg) translate(-475px, 0px);
          width: 100%;
          left: -500px;
      }
      #kinetic-homepage .vertical-line {
        border: 1px solid white;
        transform: scaleX(0.5);
      }

      @media screen  and (max-device-width: 568px) {
          #kinetic-homepage .hero-block .container {
              flex-direction: column;
          }
          #kinetic-homepage .hero-block .cards .col-1 {
              display: none;
          }
          #kinetic-homepage .hero-block .cards {
              max-width: 100%;
              width: 100%;
          }
          #kinetic-homepage .hero-block .cards .col-2 {
              flex-direction: row;
              width: 100%;
          }
          #kinetic-homepage .hero-block .cards img {
              width: calc(50% - 10px);
              max-width: 100%;
          }
          #kinetic-homepage .columns {
              flex-direction: column;
          }
          #kinetic-homepage .participate .txt-block {
              margin-left: 0;
          }
          #kinetic-homepage .participate .lines {
            transform: rotate(41deg) translate(-340px, 0px);
            left: 50px;
            top: 100%;
          }
          #kinetic-homepage .supporters a img {
              width: 100%;
          }
      }
    </style>

    <div id="kinetic-homepage" class="full-width">

      <div class="hero-block full-width">

        <img alt="kinetic-wavy-lines" class="lines" src="https://assets.openstax.org/oscms-prodcms/media/documents/kinetic-wavy-lines.svg">

        <div class="container">
          <div class="txt-block" style="display: flex; flex-direction: column; align-self: flex-start; gap: 2rem; margin-top: 3rem;">
            <!-- Supporters -->
            <div>
              <span>Supported by</span>
              <div style='display: flex; gap: 1.5rem'>
                <a class="text-decoration-none" target="_blank" href="https://ies.ed.gov/">
                  <img class="supporter-image" alt="Institute of Education Sciences logo" src="https://assets.openstax.org/oscms-prodcms/media/images/ies-logo.original.webp">
                </a>
                <span>*</span>

                <span class="vertical-line"></span>
                <a class="text-decoration-none" target="_blank" href="https://www.nsf.org/gb/en">
                  <img class="supporter-image" alt="National Science Foundation logo" src="https://assets.openstax.org/oscms-prodcms/media/images/nsf-logo.original.webp">
                </a>
              </div>
              <p class="light x-small">
                *The research reported here was supported by the Institute of Education Sciences, U.S. Department of Education, through Grant R305N210064 to Rice University. The opinions expressed are those of the authors and do not represent views of the Institute or the U.S. Department of Education.
              </p>
            </div>

            <div>
              <div style="display: flex; flex-direction: column;">
                <h2>
                  We are all unique, so why should we study the same way?
                </h2>

                <div>
                  <p>
                    Kinetic brings together real students and learning researchers,
                    with a vision to promote a more inclusive and personalized learning experience for all.
                  </p>

                  <p>
                    Take part in studies to learn more about yourself, earn amazing
                    prizes (like Apple or Nike vouchers) and discover tips that could help you become
                    a better student.
                  </p>

                  <p style="display: flex; flex-wrap: wrap; gap: 2rem; color: rgba(117, 148, 245, 1); font-size: 14px">
                    <span>Exclusive to US based participants over 18yo. </span>
                    <a href="https://help.openstax.org/s/article/kinetic" target="_blank" style="color: rgba(117, 148, 245, 1)">Learn More ></a>
                  </p>
                </div>
              </div>
              <div class="eligible">
                <div class="actions-block login-signup" style="display: none;">
                  <div class="buttons">
                    <a class="signup btn primary link" data-local="true" href="https://accounts.openstax.org/signup/?r=https%3A%2F%2Fkinetic.openstax.org%2F">
                      Sign up
                    </a>
                    <a class="login link" data-local="true" href="https://accounts.openstax.org/i/login/?r=https%3A%2F%2Fkinetic.openstax.org%2F">
                      Log in
                    </a>
                  </div>
                </div>
                <div class="actions-block start-using" style="display: none;">
                  <div class="buttons">
                    <a class="start link btn primary"
                       data-local="true"
                       href="https://kinetic.openstax.org/"
                    >
                      View available studies
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="cards">
            <div class="col-1">
              <img alt="career-card" src="https://assets.openstax.org/oscms-prodcms/media/documents/kinetic-card-career.svg">
            </div>
            <div class="col-2">
              <img alt="beliefs-card" src="https://assets.openstax.org/oscms-prodcms/media/documents/kinetic-card-beliefs.svg">
              <img alt="reader-card" src="https://assets.openstax.org/oscms-prodcms/media/documents/kinetic-card-reader.svg">
            </div>

          </div>
        </div>

      </div>

      <div class="how">
        <div class="container">
          <h3>
            How Kinetic Works
          </h3>
          <div class="panels">
            <div class="step-cards">
              <div class="step one active">
                <h5>Step 1</h5>
                <p>Choose a study that matches your interests</p>
              </div>
              <div class="step two">
                <h5>Step 2</h5>
                <p>With each study you complete, earn a chance to win prizes!</p>
              </div>
              <div class="step three">
                <h5>Step 3</h5>
                <p>Receive science-backed learning tips to help you become a better learner</p>
              </div>
            </div>
            <div class="step-pics">
              <img alt="step1" class="active" src="https://openstax.org/documents/1880/kinetic-step1.svg">
              <img alt="step2" src="https://openstax.org/documents/1881/kinetic-step2.svg">
              <img alt="step3" src="https://openstax.org/documents/1882/kinetic-step3.svg">
            </div>
          </div>
        </div>
      </div>

      <div class="sample">
        <div class="container">

        <h4>
          <svg viewbox="0 0 242 187" width="242" height="187" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M158.289 160.432c78.31-1.375 117.579-72.454 35.694-80.01-71.427-6.593-124.856 58.587-58.307 73.927" stroke="#6922EA" stroke-width="5" stroke-miterlimit="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M105.246 127.592c-24.344 8.52-61.741-11.75-49.486-41.711 7.625-18.639 36.108-9.411 25.312 9.094-8.189 14.036-25.28 10.253-34.507-.609-11.825-13.92-14.856-37.05-14.193-54.78" stroke="#6922EA" stroke-width="5" stroke-miterlimit="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
          Interested in learning more about how Kinetic works?
        </h4>

        <h5>
          Sample study: Do you thrive or survive?
        </h5>

        <a class="link sample-study" href="">
          <img alt="sample-study" src="https://assets.openstax.org/oscms-prodcms/media/images/kinetic-sample-study.original.webp">
        </a>

        <a class="link sample-study btn primary">Take the sample study</a>

        </div>
      </div>

      <div class="about">
        <div class="container">
          <div class="centering">
            <h2>About Us</h2>
            <a class="learn-more" target="_blank"  href="https://help.openstax.org/s/article/kinetic">Learn More ></a>
          </div>
          <div class="columns">
            <div>
              <h5>
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8.966 26.109a6.109 6.109 0 1 0 0-12.218 6.109 6.109 0 0 0 0 12.218zM30.174 14.36a6.109 6.109 0 1 0 0-12.217 6.109 6.109 0 0 0 0 12.218zM30.174 37.857a6.11 6.11 0 1 0 0-12.218 6.11 6.11 0 0 0 0 12.218z" fill="#D7E0FF" stroke="#6922EA" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/><path d="M11.8 14.652c5.578-3.146 5.916-3.172 12.265-4.963M11.8 25.348c5.578 3.146 5.916 3.172 12.265 4.963" stroke="#6922EA" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>
                We’re Rice University – OpenStax
              </h5>
              <p>

                We’re a trusted educational and research institution committed to improving learning. Only trained, vetted researchers are part of Kinetic.
              </p>
            </div>

            <div>
              <h5>
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_255_856)"><path d="M26.84 26.068c3.634 2.42 1.18 7.09-3.187 7.09H7.256c-4.367 0-6.82-4.67-3.186-7.09a20.47 20.47 0 0 1 11.384-3.436 20.47 20.47 0 0 1 11.385 3.436z" fill="#D7E0FF"/><path d="M13.663 22.709a20.445 20.445 0 0 0-9.593 3.36c-3.635 2.42-1.18 7.088 3.186 7.088h6.407" stroke="#6922EA" stroke-width="3" stroke-linecap="round"/><path d="M20.714 29.04c0-5.109 1.429-7.298 2.143-8.027h12.857c.715.73 2.143 2.918 2.143 8.026 0 5.837-5.628 7.99-8.485 8.72-2.857-.73-8.658-2.883-8.658-8.72zM15.46 17.06a7.43 7.43 0 1 0 0-14.86 7.43 7.43 0 0 0 0 14.86z" fill="#D7E0FF" stroke="#6922EA" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></g><defs><clipPath id="clip0_255_856"><path fill="#fff" d="M0 0h40v40H0z"/></clipPath></defs></svg>
                Your privacy is our top priority
              </h5>
              <p>
                Your identity is secure. Your responses are used solely for research.
              </p>
            </div>

            <div>
              <h5>
                <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 40 40" width="40" height="40" fill="none"><path d="M19.984 37.142c10.961 0 17.127-6.165 17.127-17.127 0-10.961-6.165-17.127-17.127-17.127-10.961 0-17.127 6.166-17.127 17.127 0 10.962 6.166 17.127 17.127 17.127z" fill="#D7E0FF"/><path d="M37.111 20.015c0 10.962-6.165 17.127-17.127 17.127-10.961 0-17.127-6.165-17.127-17.127 0-10.961 6.166-17.127 17.127-17.127" stroke="#6922EA" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/><path d="M17.244 11.394c-3.977.902-6.166 3.91-6.166 8.62 0 5.7 3.206 8.906 8.906 8.906 4.942 0 8.009-2.41 8.738-6.764M19.984 20.014l5.936-5.936" stroke="#6922EA" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/><path d="M25.918 14.083l-.356-1.153a5.714 5.714 0 0 1 1.42-5.724l4.347-4.348L32.7 7.3l4.444 1.37-4.348 4.348a5.714 5.714 0 0 1-5.725 1.42l-1.152-.356z" fill="#D7E0FF" stroke="#6922EA" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/></svg>
                Our research is learner-centered
              </h5>
              <p>
                Your participation helps us understand what learning supports work best for you and best serve you in your learning journey.
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="supporters">
        <div class="container">
          <h4>
            Support from Scientific Agencies
          </h4>
          <div class="centered">
            <div class="imgs">
              <a target="_blank" href="https://ies.ed.gov/">
                <img class="supporter-image" alt="Institute of Education Sciences logo" src="https://assets.openstax.org/oscms-prodcms/media/images/IES_logo.original.webp">
              </a>
              <a target="_blank" href="https://www.nsf.org/gb/en">
                <img class="supporter-image" alt="National Science Foundation logo" src="https://assets.openstax.org/oscms-prodcms/media/images/NSF_logo.original.webp">
              </a>
            </div>
          </div>
		  <a class="other-supporters" href="https://openstax.org/foundation">View Other Philanthropic Supporters</a>

		  <p class="light x-small">
			*The research reported here was supported by the Institute of Education Sciences, U.S. Department of Education, through Grant R305N210064 to Rice University. The opinions expressed are those of the authors and do not represent views of the Institute or the U.S. Department of Education.
		  </p>
        </div>
      </div>

      <div class="participate eligible">
        <img alt="kinetic-wavy-lines" class="lines" src="https://assets.openstax.org/oscms-prodcms/media/documents/kinetic-wavy-lines.svg">

        <div class="container eligible">
          <div class="txt-block">
            <h3>
              Want to participate in Kinetic research?
            </h3>
            <p>
              Already have an OpenStax account? Use your email and password to log into kinetic
            </p>

            <div class="actions-block login-signup" style="display: none">
              <div class="buttons">
                <a
                  class="signup btn primary link"
                  data-local="true"
                  href="https://accounts.openstax.org/signup/?r=https%3A%2F%2Fkinetic.openstax.org%2F"
                  >
                  Sign up
                </a>
                <a
                  class="login link"
                  data-local="true"
                  href="https://accounts.openstax.org/i/login/?r=https%3A%2F%2Fkinetic.openstax.org%2F"
                  >
                  Log in
                </a>
              </div>
            </div>
            <div class="actions-block start-using" style="display: none;">
              <div class="buttons">
                <a class="start link btn primary"
                   data-local="true"
                   href="https://kinetic.openstax.org/"
                >
                  View available studies
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="application/javascript">

      if (!window.KINETIC.postScriptRan) {
          var steps = document.querySelectorAll('#kinetic-homepage .step-cards .step');
          var images = document.querySelectorAll('#kinetic-homepage .step-pics img');
          var stepsAnimationTimer;

          function revealElements(klass) {
              var links = document.querySelectorAll('.' + klass);
              for (var i = 0; i < links.length; i++) {
                  links[i].style.display = "block";
              }
          }

          function hideElements(klass) {
            var links = document.querySelectorAll('.' + klass);
            for (var i = 0; i < links.length; i++) {
              links[i].style.display = "none";
            }
          }

          function focusStep(index) {
              for (var x = 0; x < steps.length; x++) {
                  images[x].classList.remove('active')
                  steps[x].classList.remove('active')
              }
              steps[index].classList.add('active')
              images[index].classList.add('active')
          }

          function stopStepsAnimation() {
              clearInterval(stepsAnimationTimer);
              stepsAnimationTimer = null;
          }

          function animateSteps() {
              if (stepsAnimationTimer) {
                  return;
              }
              const order = [1,2,0];
              let indx = 0;
              const animate = () => {
                  focusStep(order[indx]);
                  indx += 1;
                  if (indx >= order.length) {
                      indx = 0;
                  }
              }
              animate();
              stepsAnimationTimer = setInterval(animate, 3000)
          }

          function setupStepActions() {
              for (let i = 0; i < steps.length; i++) {
                  const index = i;
                  steps[i].addEventListener('click', function(el) {
                      stopStepsAnimation();
                      focusStep(index);
                  })
              }
              const observer = new IntersectionObserver(function(entries) {
                  entries.forEach((entry) => {
                      if (entry.isIntersecting) {
                          animateSteps();
                          observer.disconnect();
                      }
                  })
              }, {
                  threshold: 0.9
              });
              observer.observe(document.querySelector('#kinetic-homepage .step-cards'));
          }

          function checkEligibility() {
            return fetch('https://kinetic.openstax.org/api/v1/eligibility')
                    .then((response) => response.json())
                    .then((response) => {
                      if (!response.eligible) {
                        hideElements('eligible')
                        revealElements('ineligible')
                      }
                      return response.eligible
                    }
            );
          }

          function setUserState() {
              if (!window.fetch) {
                  revealElements('login-signup');
                  return;
              }
              return window.fetch(URLS.WHOAMI, {
                  method: 'GET',
                  credentials: 'include'
              }).then(function(resp) {
                  resp.json().then(function(user) {
                      if (user.id) {
                          revealElements('start-using');
                      } else {
                          revealElements('login-signup');
                      }
                  });
              }).catch(function() {
                  revealElements('login-signup');
              });
          }

          function rewriteLinks(klass, href) {
              var links = document.querySelectorAll('.link.' + klass);
              for (var i = 0; i < links.length; i++) {
                  links[i].href = href;
              }
          }
          setupStepActions(steps);
          rewriteLinks('sample-study', URLS.SAMPLE_STUDY)
          rewriteLinks('login', URLS.ACCOUNTS + '/i/login?r=' + URLS.KINETIC);
          rewriteLinks('signup', URLS.ACCOUNTS + '/i/signup?r=' + URLS.KINETIC);
          rewriteLinks('start', URLS.KINETIC);
          checkEligibility().then(isEligible => isEligible && setUserState())

          function onPageUnload() {
              if (previousFavIcon) {
                  previousFavIcon.el.href = previousFavIcon.href;
              }
              delete window.KINETIC;
          }

          var observer = new MutationObserver(function(mutations_list) {
              mutations_list.forEach(function(mutation) {
                  mutation.removedNodes.forEach(function(removed_node) {
                      if(removed_node.className === 'general page') {
                          onPageUnload();
                          observer.disconnect();
                      }
                  });
              });
          });
          observer.observe(document, { subtree: true, childList: true });
          window.KINETIC.postScriptRan = true;
      }
    </script>
  </body>
</html>
